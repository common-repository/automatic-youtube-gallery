!function(a){"use strict";var e=!1;function t(e){++ayg_public.gallery_index,e.addClass("ayg-theme-initialized");var t=e.data("params"),n="ayg-player-"+ayg_public.gallery_index;e.find(".ayg-player-iframe").attr("id",n);var l=i(n,{custom:{params:t,image:a("#"+n).data("image")},events:{onStateChange:function(a){a.data==YT.PlayerState.PLAYING&&o(n),a.data==YT.PlayerState.ENDED&&1==t.loop&&l.play()}}})}var i=function(t,i){var n=a("#"+t),o=n.closest("div"),l=null,r=null,s=n.data("id"),c=i.custom.params,d=function(){var o="https://www.youtube.com";1==ayg_public.privacy_enhanced_mode&&(o="https://www.youtube-nocookie.com");var l=o+"/embed/"+s+"?enablejsapi=1&playsinline=1&rel=0";ayg_public.origin&&(l+="&origin="+ayg_public.origin),c.hasOwnProperty("autoplay")&&(l+="&autoplay="+parseInt(c.autoplay)),c.hasOwnProperty("muted")&&(l+="&mute="+parseInt(c.muted)),c.hasOwnProperty("controls")&&(l+="&controls="+parseInt(c.controls)),c.hasOwnProperty("modestbranding")&&(l+="&modestbranding="+parseInt(c.modestbranding)),c.hasOwnProperty("cc_load_policy")&&(l+="&cc_load_policy="+parseInt(c.cc_load_policy)),c.hasOwnProperty("iv_load_policy")&&(l+="&iv_load_policy="+parseInt(c.iv_load_policy)),c.hasOwnProperty("hl")&&(l+="&hl="+c.hl),c.hasOwnProperty("cc_lang_pref")&&(l+="&cc_lang_pref="+c.cc_lang_pref),"iframe"==n.prop("tagName").toLowerCase()?n.attr("src",l):(n.replaceWith('<iframe id="'+t+'" class="ayg-player-iframe" width="100%" height="100%" src="'+l+'" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'),n=a("#"+t)),new Promise(a=>{if(void 0===window.YT&&!1==e){e=!0;var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)}if(void 0!==window.YT&&window.YT.loaded)a();else{let n=setInterval(function(){void 0!==window.YT&&window.YT.loaded&&(clearInterval(n),a())},10)}}).then(()=>{r=new YT.Player(t,{events:i.events})})},g=function(){l&&(l.remove(),l=null)};if(1==ayg_public.cookie_consent){var y='<div class="ayg-privacy-wrapper" style="background-image: url('+i.custom.image+');">';y+='<div class="ayg-privacy-consent-block">',y+='<div class="ayg-privacy-consent-message">'+ayg_public.consent_message+"</div>",y+='<div class="ayg-privacy-consent-button ayg-button">'+ayg_public.button_label+"</div>",y+="</div>",y+="</div>",o.append(y),(l=o.find(".ayg-privacy-wrapper")).on("click",".ayg-privacy-consent-button",function(){a(this).html("..."),ayg_public.cookie_consent=0,c.autoplay=1,d(),g();var e={action:"ayg_set_cookie",security:ayg_public.ajax_nonce};a.post(ayg_public.ajax_url,e,function(a){})})}else d();return{play:function(){r&&r.playVideo&&r.playVideo()},change:function(a){r&&r.loadVideoById?r.loadVideoById(a.id):(s=a.id,l?1==ayg_public.cookie_consent?l.css("background-image","url("+a.image+")"):(c.autoplay=1,d(),g()):(c.autoplay=1,d()))},stop:function(){r&&r.stopVideo&&r.stopVideo()},destroy:function(){r?(r.stopVideo&&r.stopVideo(),r.destroy&&r.destroy()):n.remove(),1==ayg_public.cookie_consent&&g()}}};window.ayg_init_player=i;var n=function(e){var t=e.data("params");t.action="ayg_load_more_videos",t.security=ayg_public.ajax_nonce;var i=parseInt(t.total_pages),n=1,o=[""],l=e.closest(".ayg").find(".ayg-gallery");e.on("click",".ayg-pagination-next-btn",function(){var r=a(this);e.addClass("ayg-loading");var s=r.data("type");t.pageToken=t.next_page_token,o[n]=t.next_page_token,a.post(ayg_public.ajax_url,t,function(a){if(a.success){switch(n=Math.min(n+1,i),t.next_page_token="",n<i&&a.data.next_page_token&&(t.next_page_token=a.data.next_page_token),s){case"more":l.append(a.data.html);break;case"next":e.find(".ayg-pagination-prev-btn").show(),e.find(".ayg-pagination-current-page-number").html(n),l.html(a.data.html)}""==t.next_page_token&&r.hide(),e.trigger("gallery.updated")}e.removeClass("ayg-loading")})}),e.on("click",".ayg-pagination-prev-btn",function(){var i=a(this);e.addClass("ayg-loading"),n=Math.max(n-1,1),t.pageToken=o[n-1],a.post(ayg_public.ajax_url,t,function(a){a.success&&(t.next_page_token="",a.data.next_page_token&&(t.next_page_token=a.data.next_page_token),l.html(a.data.html),e.find(".ayg-pagination-next-btn").show(),e.find(".ayg-pagination-current-page-number").html(n),1==n&&i.hide(),e.trigger("gallery.updated")),e.removeClass("ayg-loading")})})};window.ayg_init_pagination=n;var o=function(e){if(ayg_public.active_player_id||(ayg_public.active_player_id=e),e==ayg_public.active_player_id)return!1;ayg_public.active_player_id=e,a("iframe.ayg-player-iframe:not(#"+e+")").each(function(){this.contentWindow.postMessage('{"event":"command", "func":"pauseVideo", "args":""}',"*")})};window.ayg_pause_other_players=o,a(function(){a(".ayg-theme-classic").each(function(){var e,t,l,r,s,c,d,g,y;e=a(this),++ayg_public.gallery_index,e.addClass("ayg-theme-initialized"),t=e.data("params"),r=(l=e.find(".ayg-item").eq(0)).find(".ayg-thumbnail").data("id"),s="ayg-player-"+ayg_public.gallery_index,e.find(".ayg-player-iframe").attr("id",s),c=e.find(".ayg-pagination"),d=null,g="none",c.length>0&&(g=(d=c.find(".ayg-pagination-next-btn")).data("type")),y=i(s,{custom:{params:t,image:l.find(".ayg-thumbnail-image").attr("src")},events:{onStateChange:function(a){if(a.data==YT.PlayerState.PLAYING&&o(s),a.data==YT.PlayerState.ENDED){if(1==t.autoadvance){if(y.stop(),l.is(":visible")){if(l.is(":last-child")){if("more"==g||"none"==g)1==t.loop&&e.find(".ayg-item").eq(0).trigger("click");else if(d.is(":visible")){d.trigger("click");let i=setInterval(function(){0==e.find(".ayg-pagination.ayg-loading").length&&(clearInterval(i),e.find(".ayg-item").eq(0).trigger("click"))},1e3)}}else l.next(".ayg-item").trigger("click")}else e.find(".ayg-item").eq(0).trigger("click")}else 1==t.loop?y.play():y.stop()}}}}),e.on("click",".ayg-item",function(){if(l=a(this),e.find(".ayg-active").removeClass("ayg-active"),l.addClass("ayg-active"),r=l.find(".ayg-thumbnail").data("id"),y.change({id:r,image:l.find(".ayg-thumbnail-image").attr("src")}),1==t.player_title){var i=l.find(".ayg-thumbnail").data("title");e.find(".ayg-player-title").html(i)}if(1==t.player_description){var n=l.find(".ayg-thumbnail-description").html();e.find(".ayg-player-description").html(n)}a("html, body").animate({scrollTop:e.offset().top-ayg_public.top_offset},500,function(){var a=l.find(".ayg-thumbnail").data("url");""!=a&&window.history.replaceState(null,null,a)}),1==t.autoadvance&&"more"==g&&l.is(":last-child")&&d.is(":visible")&&d.trigger("click")}),c.length>0&&(n(c),c.on("gallery.updated",function(){!(e.find(".ayg-active").length>0)&&e.find(".ayg-item-"+r).length>0&&(l=e.find(".ayg-item-"+r).addClass("ayg-active"))}))}),a(".ayg-theme-single").each(function(){t(a(this))}),a(".ayg-theme-livestream").each(function(){t(a(this))});var e=ayg_public.gallery_id;""!=e&&a("#ayg-"+e).length&&(history.scrollRestoration?history.scrollRestoration="manual":window.onbeforeunload=function(){window.scrollTo(0,0)},a("html, body").animate({scrollTop:a("#ayg-"+e).offset().top-ayg_public.top_offset},500)),a(document).on("click",".ayg-player-description-toggle-btn",function(e){e.preventDefault();var t=a(this),i=t.closest(".ayg-player-description"),n=i.find(".ayg-player-description-dots"),o=i.find(".ayg-player-description-more");n.is(":visible")?(t.html(ayg_public.i18n.show_less),n.hide(),o.fadeIn()):o.fadeOut(function(){t.html(ayg_public.i18n.show_more),n.show()})})})}(jQuery);